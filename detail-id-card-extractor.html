<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indonesian ID Card Auto-Capture & LLM OCR Pipeline - Detail</title>
    <link href="dist/output.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
</head>
<body class="bg-white dark:bg-slate-900 transition-colors duration-300">
    <header class="bg-transparent absolute top-0 left-0 w-full flex items-center z-10">
        <div class="container">
            <div class="flex items-center justify-between relative">
                <div class="px-4">
                    <a href="index.html" class="block py-6 font-bold text-lg md:text-2xl text-dark dark:text-white">
                        MyPortfolio<span class="text-indigo-600 dark:text-indigo-400 text-2xl">+</span>
                    </a>
                </div>
                <div class="flex items-center gap-4 px-4">
                    <!-- Dark Mode Toggle -->
                    <button id="theme-toggle" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5 text-slate-700 dark:text-slate-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                        </svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5 text-slate-700 dark:text-slate-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    
                    <a href="index.html#portfolio" class="text-dark dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Portfolio
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="pt-28 pb-16 bg-slate-50 dark:bg-slate-900 relative overflow-hidden">
        
        <div class="container max-w-6xl mx-auto px-4 relative z-10">
            <div class="grid lg:grid-cols-2 gap-8 items-center">
                <!-- Left Content -->
                <div>
                    <div class="mb-6">
                        <span class="inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-full shadow-lg">
                            <i class="fas fa-briefcase"></i>
                            REAL WORLD PROJECT
                        </span>
                    </div>
                    <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-slate-900 dark:text-white">
                        Indonesian ID Card Auto-Capture & LLM OCR Pipeline
                    </h1>
                    <p class="text-lg md:text-xl text-slate-600 dark:text-slate-300 leading-relaxed mb-8">
                        An improved implementation using on-device TFJS detector (YOLOv5nu) for auto-capture and LLM-based OCR extractor (Ministral-3 via Ollama) for accurate, normalized, and structured results.
                    </p>
                    
                    <!-- Technology Tags -->
                    <div class="flex flex-wrap gap-3 mb-8">
                        <span class="px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-all">
                            <i class="fas fa-eye mr-2 text-indigo-600"></i>Computer Vision
                        </span>
                        <span class="px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-all">
                            <i class="fas fa-mobile-alt mr-2 text-indigo-600"></i>Mobile Web
                        </span>
                        <span class="px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-all">
                            <i class="fas fa-brain mr-2 text-indigo-600"></i>LLM OCR
                        </span>
                    </div>

                    <!-- Key Metrics -->
                    <div class="grid grid-cols-3 gap-4">
                        <div class="bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 shadow-sm">
                            <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">99.5%</div>
                            <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">mAP@0.5</div>
                        </div>
                        <div class="bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 shadow-sm">
                            <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">15-22s</div>
                            <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">OCR Time</div>
                        </div>
                        <div class="bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 shadow-sm">
                            <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">160px</div>
                            <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Input Size</div>
                        </div>
                    </div>
                </div>

                <!-- Right Visual -->
                <div class="relative">
                    <div class="relative bg-white dark:bg-slate-800 rounded-3xl p-8 border border-slate-200 dark:border-slate-700 shadow-xl">
                        
                        <div class="relative space-y-4">
                            <div class="flex items-center gap-3 bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600">
                                <div class="w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-camera text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-800 dark:text-slate-200">Auto-Capture</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">Real-time detection</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-3 bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600">
                                <div class="w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-brain text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-800 dark:text-slate-200">LLM OCR</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">Ministral-3 via Ollama</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-3 bg-slate-50 dark:bg-slate-700 rounded-xl p-4 border border-slate-200 dark:border-slate-600">
                                <div class="w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check-circle text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-800 dark:text-slate-200">Structured Output</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">JSON normalized data</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hero Image Banner -->
    <section class="py-0 -mt-8">
        <div class="container max-w-6xl mx-auto px-4">
            <div class="relative overflow-hidden rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700">
                <img src="dist/img/portfolio/5.png" alt="Indonesian ID Card Auto-Capture System" class="w-full h-[400px] object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
            </div>
        </div>
    </section>

    <!-- Content Section -->
    <section class="py-16 min-h-screen">
        <div class="container max-w-5xl mx-auto px-4">

            <div class="prose prose-lg dark:prose-invert max-w-none">
                <!-- Demo Video -->
                <div class="not-prose mb-12">
                    <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3"><i class="fas fa-play-circle text-indigo-600 dark:text-indigo-400"></i>System Demo</h2>
                    <figure class="my-8 group">
                        <div class="overflow-hidden rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 bg-black">
                            <video class="w-full" controls poster="dist/img/projects/id-card-extractor/system-architecture.png">
                                <source src="dist/img/projects/id-card-extractor/demo.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <figcaption class="mt-3 text-center text-sm text-slate-600 dark:text-slate-400 italic">Complete system demonstration: auto-capture → OCR → form filling</figcaption>
                    </figure>
                </div>

                <!-- Overview Section with Card -->
                <div class="not-prose mb-12">
                    <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3"><i class="fas fa-info-circle text-indigo-600 dark:text-indigo-400"></i>Overview</h2>
                    <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-lg">
                        <p class="text-slate-700 dark:text-slate-300 text-lg leading-relaxed mb-4">The registration form is opened from an Android device via a mobile web interface. Users don't need to manually take photos of their ID card. Instead, the system provides:</p>
                        <ul class="space-y-3">
                            <li class="flex items-start gap-3 text-slate-700 dark:text-slate-300">
                                <i class="fas fa-check-circle text-indigo-600 dark:text-indigo-400 mt-1 flex-shrink-0"></i>
                                <span>Real-time object detection (YOLOv5n → TFJS) running inside the browser</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 dark:text-slate-300">
                                <i class="fas fa-check-circle text-indigo-600 dark:text-indigo-400 mt-1 flex-shrink-0"></i>
                                <span>Auto-capture when the ID card is stable inside the placeholder</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 dark:text-slate-300">
                                <i class="fas fa-check-circle text-indigo-600 dark:text-indigo-400 mt-1 flex-shrink-0"></i>
                                <span>Automatic image cropping based on bounding-box output</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 dark:text-slate-300">
                                <i class="fas fa-check-circle text-indigo-600 dark:text-indigo-400 mt-1 flex-shrink-0"></i>
                                <span>OCR extraction using an LLM (Ministral-3:3b via Ollama)</span>
                            </li>
                        </ul>
                        <p class="text-slate-700 dark:text-slate-300 text-lg leading-relaxed mt-4">Everything runs through a backend structured with Docker Compose, providing two services: extractor (handles preprocessing, LLM prompting, postprocessing) and ollama (hosts the Mistral model). Final OCR results are returned to the client as structured JSON and mapped directly to the registration form fields (KTP or SIM).</p>
                    </div>
                </div>

                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3 not-prose"><i class="fas fa-network-wired text-indigo-600 dark:text-indigo-400"></i>System Architecture</h2>
                <div class="my-8">
                    <img src="dist/img/projects/id-card-extractor/system-architecture.png" alt="System Architecture" class="w-full rounded-lg shadow-lg border border-slate-200 dark:border-slate-700">
                </div>
                <div class="bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 shadow-md mb-8">
                    <p class="text-slate-700 dark:text-slate-300 mb-4">The system is divided into three main layers:</p>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-slate-50 dark:bg-slate-700 p-4 rounded-lg border border-slate-200 dark:border-slate-600">
                            <h4 class="font-bold text-indigo-600 dark:text-indigo-400 mb-2 flex items-center gap-2"><i class="fas fa-mobile-alt"></i>Client</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Runs in mobile web browser with in-browser object detection model</p>
                        </div>
                        <div class="bg-slate-50 dark:bg-slate-700 p-4 rounded-lg border border-slate-200 dark:border-slate-600">
                            <h4 class="font-bold text-indigo-600 dark:text-indigo-400 mb-2 flex items-center gap-2"><i class="fas fa-cogs"></i>Extractor</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Processes captured image using LangChain and performs postprocessing</p>
                        </div>
                        <div class="bg-slate-50 dark:bg-slate-700 p-4 rounded-lg border border-slate-200 dark:border-slate-600">
                            <h4 class="font-bold text-indigo-600 dark:text-indigo-400 mb-2 flex items-center gap-2"><i class="fas fa-brain"></i>Ollama</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Hosts Vision LLM (Ministral-3:3b) for OCR and information extraction</p>
                        </div>
                    </div>
                </div>

                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3 not-prose"><i class="fas fa-eye text-indigo-600 dark:text-indigo-400"></i>On-Device Object Detection</h2>
                <div class="my-8">
                    <img src="dist/img/projects/id-card-extractor/object-detection.gif" alt="Object Detection Demo" class="w-full rounded-lg shadow-lg border border-slate-200 dark:border-slate-700">
                </div>
                <h3>Model</h3>
                <ul>
                    <li>YOLOv5nu (nano variant)</li>
                    <li>Converted to TensorFlow.js for browser execution</li>
                    <li>Target environment: mid-range Android devices</li>
                    <li>Input size: 160x160</li>
                </ul>

                <h3>Evaluation Summary</h3>
                <table class="min-w-full border border-slate-300 dark:border-slate-700">
                    <tbody>
                        <tr><td class="border px-4 py-2">Precision</td><td class="border px-4 py-2">0.99962</td></tr>
                        <tr><td class="border px-4 py-2">Recall</td><td class="border px-4 py-2">1.00000</td></tr>
                        <tr><td class="border px-4 py-2">mAP@0.5</td><td class="border px-4 py-2">0.995</td></tr>
                        <tr><td class="border px-4 py-2">mAP@0.5:0.95</td><td class="border px-4 py-2">0.99384</td></tr>
                    </tbody>
                <div class="my-8">
                    <img src="dist/img/projects/id-card-extractor/ocr.gif" alt="OCR Pipeline Demo" class="w-full rounded-lg shadow-lg border border-slate-200 dark:border-slate-700">
                </div>
                </table>

                <h2>OCR Pipeline (LLM-Based)</h2>
                <p>OCR is performed using Ministral-3:3b running on Ollama, orchestrated via LangChain. The pipeline uses SystemMessage containing instruction sets for KTP and SIM extraction, combined with HumanMessage containing the cropped ID card image.</p>

                <h3>Structured Output with Pydantic</h3>
                <p>LLM output is forced into a schema with fields: nama, id, jenis_kelamin, tanggal_lahir, alamat, provinsi, kabupaten_kota, kecamatan, and desa_kelurahan.</p>

                <h2>Postprocessing</h2>
                <p>To fix LLM misreads of Indonesian region names, the backend performs hierarchical lookups using CSV datasets with fuzzywuzzy matching:</p>
                <ol>
                    <li>Match province</li>
                    <li>Filter city/regency inside that province</li>
                    <li>Filter district inside filtered city/regency</li>
                    <li>Filter village/sub-district inside filtered district</li>
                </ol>
                <div class="my-8">
                    <img src="dist/img/projects/id-card-extractor/deployment-architecture.png" alt="Deployment Architecture" class="w-full rounded-lg shadow-lg border border-slate-200 dark:border-slate-700">
                </div>
                <p>This improves region accuracy significantly, especially for similar-sounding names and OCR artifacts.</p>

                <h2>Deployment</h2>
                <p>Both containers (ocr-service and ollama) communicate internally with Docker Compose. No direct public exposure of the LLM.</p>

                <h2>Performance</h2>
                <ul>
                    <li>Latency on device (Samsung Galaxy A13): 900-1100 ms/frame</li>
                    <li>OCR inference time: 15-22 seconds in production (Tesla M60 GPU)</li>
                    <li>Works well under indoor lighting and moderate camera shake</li>
                </ul>

                <h2>Limitations & Challenges</h2>
                <ul>
                    <li><strong>GPU Dependency:</strong> LLM OCR significantly slower on CPU (up to 2 minutes)</li>
                    <li><strong>Image Quality:</strong> Cheap Android lenses produce noise, some SIM cards reflect light aggressively</li>
                    <li><strong>Region Detection:</strong> CSV normalization helps but not 100% accurate for uncommon village spellings</li>
                    <li><strong>TFJS Performance:</strong> Slower inference than onnx runtime or tflite</li>
                </ul>

                <h2>Future Work</h2>
                <ul>
                    <li>Using Android native app for better performance</li>
                    <li>Add more prompt types for other ID cards (Medical Card, Medical Record)</li>
                    <li>Optimize LLM usage or try other models for better CPU speed/accuracy</li>
                    <li>Try more lightweight object detection models (YOLOv3)</li>
                </ul>
            </div>
        </div>
    </section>

    <footer class="bg-slate-900 dark:bg-slate-950 pt-12 pb-6">
        <div class="container text-center">
            <p class="text-slate-400">©2023 Maulana Surya Negara. All rights reserved.</p>
        </div>
    </footer>

    <script src="dist/js/script.js"></script>
</body>
</html>
